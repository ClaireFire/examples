 <declare-styleable name="CustomView">
 /** 图片的长宽比 */  
imageAspectRatio; 
TypedArray a = context.getTheme().obtainStyledAttributes(  
        attrs, R.styleable.CustomView, defStyle, 0);   
case R.styleable.CustomView_titleTextSize:  
titleTextSize = a.getDimensionPixelSize(  
        attr, (int) TypedValue.applyDimension(  
                TypedValue.COMPLEX_UNIT_SP, 25, getResources().getDisplayMetrics()));//默认标题字体大小25sp  
int widthMode = MeasureSpec.getMode(widthMeasureSpec);  
    int widthSize = MeasureSpec.getSize(widthMeasureSpec);  
    int heightMode = MeasureSpec.getMode(heightMeasureSpec);  
    int heightSize = MeasureSpec.getSize(heightMeasureSpec);        
    
    
    int rawWidth = width - getPaddingLeft() - getPaddingRight();
			int desired = (int) (getPaddingTop() + getPaddingBottom() + imageAspectRatio * rawWidth);
			
			if (titleText != null) {
				paint.setTextSize(titleTextSize);
				FontMetrics fm = paint.getFontMetrics();
				int textHeight = (int) Math.ceil(fm.descent - fm.ascent);  